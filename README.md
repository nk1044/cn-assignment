# P2P Network with Consensus-Based Liveness Detection
Submitted by:-
Neeraj Kumar (B23CS1044)
Abhyudaya Tiwari (B23CS1085)

A distributed P2P system featuring:

* quorum-based seed consensus
* gossip message dissemination
* power-law neighbor selection
* distributed dead node detection

No single peer or seed can unilaterally modify membership.

---

## Components

**starter.py** — Process manager

* Reads `config.yml`
* Spawns seeds and peers
* Allocates peer ports
* Provides CLI

**seed.py** — Membership directory

* Maintains global peer list
* Uses majority voting among seeds
* Does not participate in gossip

**peer.py** — Network participant

* Registers with seeds
* Selects neighbors (power law)
* Runs gossip protocol
* Performs liveness checks

**power_law_simulation.py** — Optional topology validator

---

## Configuration

Create **config.yml**:

```yaml
seeds:
  - ip: 127.0.0.1
    port: 5000
  - ip: 127.0.0.1
    port: 5001
  - ip: 127.0.0.1
    port: 5002

peer_port_range:
  start: 6000
  end: 7000

initial_peers: 3
```

`config.txt` is auto-generated by seeds. Do not edit while running.

---

## Requirements

* Python 3.8+
* PyYAML
* matplotlib (only for simulation)

Install:

```bash
pip install pyyaml matplotlib
```

---

# Quick Start (Single Machine)

### Run the network

```bash
python starter.py
```

This automatically:

* starts seeds
* spawns initial peers
* opens manager CLI

---

### Manager commands

```
manager> add
manager> kill <port>
manager> list
manager> exit
```

---

### Logs

```
seed.log
peer.log
outputfile.txt
```

---

# Running on Multiple Machines

Use this when deploying across different hosts.

---

## Step 1 — Prepare common config

Copy the **same project folder** to all machines.

Edit `config.yml` so seeds contain **real reachable IPs**:

```yaml
seeds:
  - ip: 10.0.0.1
    port: 5000
  - ip: 10.0.0.2
    port: 5000
  - ip: 10.0.0.3
    port: 5000
```

✅ Use private LAN IPs (e.g., 192.168.x.x or 10.x.x.x)
✅ Ensure firewalls allow the ports

---

## Step 2 — Start seed nodes

On each seed machine, run **one seed**:

```bash
python seed.py <seed-ip>:<port>
```

Example:

```bash
python seed.py 10.0.0.1:5000
```

Wait until all seeds are running.

---

## Step 3 — Verify config.txt

After seeds start, ensure every peer machine has a `config.txt` containing:

```
10.0.0.1:5000
10.0.0.2:5000
10.0.0.3:5000
```

(Seeds auto-write this on their host; copy it to peer machines if needed.)

---

## Step 4 — Start peers (any machine)

Run on any host:

```bash
python peer.py <peer-ip>:<peer-port>
```

Example:

```bash
python peer.py 10.0.0.5:6001
```

Peers will automatically:

* register with majority of seeds
* fetch peer list
* join gossip overlay

---

## Step 5 — (Optional) Use starter locally

You can still use `starter.py` on a single machine to spawn many peers that connect to remote seeds.

---

# Topology Simulation 

```bash
python power_law_simulation.py
```

---

# Fault Tolerance Guarantees

* Majority of seeds required for membership changes
* Majority of neighbors required before reporting a peer dead
* Gossip tolerates node failures
* No single node has unilateral control

---